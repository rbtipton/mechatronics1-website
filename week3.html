<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mechatronics 1: Week 3 Study Guide</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }
        .nav-button {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 0.75rem 0.5rem;
          border-radius: 0.5rem;
          font-weight: 600;
          transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease;
          flex: 1; /* Make buttons take equal width */
          text-align: center;
        }
        .nav-button.active {
          background-color: #4f46e5; /* indigo-600 */
          color: white;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
          transform: translateY(-2px);
        }
        .nav-button:not(.active) {
          background-color: #e5e7eb; /* gray-200 */
          color: #374151; /* gray-700 */
        }
        .nav-button:not(.active):hover {
          background-color: #d1d5db; /* gray-300 */
        }
        .nav-button svg {
          margin-bottom: 0.25rem;
        }
        @media (min-width: 640px) { /* sm breakpoint */
          .nav-button {
            padding: 1rem 1rem;
          }
        }
        @media (min-width: 768px) { /* md breakpoint */
          .nav-button {
            padding: 1rem 1.5rem;
          }
        }
        /* Custom styles for the circuit visualization */
        .circuit-diagram {
            border: 2px solid #374151; /* Darker gray border */
            border-radius: 0.75rem; /* More rounded */
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            background-color: #f9fafb; /* Lighter background for the diagram */
        }
        .circuit-label {
            position: absolute;
            background-color: #f9fafb; /* Match diagram background */
            padding: 0 0.5rem;
            font-size: 0.875rem; /* text-sm */
            color: #4b5563; /* gray-600 */
            border-radius: 0.25rem;
        }
        .voltage-source {
            width: 4rem; /* 64px */
            height: 4rem; /* 64px */
            background-color: #3b82f6; /* Blue-500 */
            border-radius: 9999px; /* Fully rounded */
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700; /* font-bold */
            font-size: 1.125rem; /* text-lg */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .resistor-element {
            width: 6rem; /* 96px */
            height: 2rem; /* 32px */
            background-color: #ef4444; /* Red-500 */
            border-radius: 0.375rem; /* rounded-md */
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700; /* font-bold */
            font-size: 1.125rem; /* text-lg */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .wire {
            width: 0.25rem; /* 4px */
            height: 3rem; /* 48px */
            background-color: #374151; /* Dark gray */
            margin: 0.5rem 0;
        }
        .current-indicator {
            color: #1f2937; /* Dark gray */
            font-weight: 700; /* font-bold */
            font-size: 1.125rem; /* text-lg */
            margin-top: 0.5rem;
        }
        .formula-box {
            background-color: #e0f2fe; /* Light blue background */
            border-left: 4px solid #38bdf8; /* Blue border on left */
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: 'Fira Code', 'Cascadia Code', 'Consolas', monospace; /* Monospace font */
            font-size: 1rem;
            color: #0c4a6e; /* Darker blue text */
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
        }
    </style>
</head>
<body class="antialiased">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide React icons (inline SVGs for direct use in HTML)
        const BookOpenText = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>;
        const FlaskConical = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M10 2v6c0 2.2-1.8 4-4 4H2"/><path d="M14 2v6c0 2.2 1.8 4 4 4h4"/><path d="M21 15c.8-1 1-2.2.6-3.4-.4-1.1-1.5-1.7-2.7-1.6-1.2.1-2.2.9-2.6 2.1-.4 1.1-.2 2.5.6 3.4l2.9 3.2c1.3 1.4 3.3 1.4 4.6 0 .4-.5.7-1.2.8-1.9L21 15z"/><path d="M9 15c-.8-1-1-2.2-.6-3.4.4-1.1 1.5-1.7 2.7-1.6 1.2.1 2.2.9 2.6 2.1.4 1.1.2 2.5-.6 3.4l-2.9 3.2c-1.3 1.4-3.3 1.4-4.6 0-.4-.5-.7-1.2-.8-1.9L9 15z"/></svg>;
        const Award = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="8" r="6"/><path d="M15.477 12.89L17.18 21l-5.15-3.62L6.82 21l1.703-8.11"/></svg>;
        const CheckCircle = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="m9 11 3 3L22 4"/></svg>;
        const XCircle = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></svg>;
        const Lightbulb = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M9 18h6"/><path d="M10 22h4"/><path d="M12 2C7.8 2 4.1 4.3 2.4 8.7A4.4 4.4 0 0 0 4 15h.3c.7 0 1.4.3 1.8.9l.4.9c1.4 2.3 3.4 3.4 5.4 3.4 2 0 4-.9 5.4-3.4l.4-.9c.4-.6 1.1-.9 1.8-.9H20a4.4 4.4 0 0 0 1.6-6.3C19.9 4.3 16.2 2 12 2z"/></svg>;
        const Zap = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>;
        const Bolt = ({ className }) => <Zap className={className} />; // Reusing Zap for Bolt
        const CircuitBoard = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="4" y="4" width="16" height="16" rx="2" ry="2"/><path d="M9 9h6v6H9z"/><path d="M12 1v3"/><path d="M12 20v3"/><path d="M1 12h3"/><path d="M20 12h3"/></svg>;
        const Split = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M16 3h5v5"/><path d="M8 3H3v5"/><path d="M12 18V9"/><path d="M17 13l-5 5-5-5"/></svg>;
        const Home = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>;

        // New Icons for Week 2
        const CapacitorIcon = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M7 5h10M7 19h10M12 5v14"/></svg>;
        const InductorIcon = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 12s3-4 6-4 6 4 6 4 3 4 6 4"/></svg>;
        const Grid = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><path d="M3 9h18"/><path d="M3 15h18"/><path d="M9 3v18"/><path d="M15 3v18"/></svg>;

        // New Icons for Week 3
        const SemiconductorIcon = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12 2v20"/><path d="M17 5H7"/><path d="M17 19H7"/><path d="M5 12h14"/></svg>;
        const DiodeIcon = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 12h20"/><path d="M18 7l4 5-4 5"/><path d="M14 7v10"/></svg>;
        const LedIcon = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12 12v2"/><path d="M10 10l-2 2"/><path d="M14 10l2 2"/><path d="M12 2a4 4 0 0 0-4 4v2a4 4 0 0 0 4 4 4 4 0 0 0 4-4V6a4 4 0 0 0-4-4z"/><path d="M7 17h10"/><path d="M12 22v-3"/></svg>;
        const TransistorIcon = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M20 10h-4V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v6H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h4v4a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-4h4a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2z"/></svg>;
        const Power = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12 2v10"/><path d="M18.36 6.64A9 9 0 1 1 5.64 6.64L12 12L18.36 6.64z"/></svg>;


        // Concept Review Component
        const ConceptReview = () => {
          return (
            <div className="p-6 bg-white rounded-lg shadow-lg">
              <h2 className="text-3xl font-bold text-gray-800 mb-6 border-b-2 pb-2">Week 3: Semiconductors, Diodes & Transistors</h2>

              {/* What are Semiconductors? */}
              <section className="mb-8">
                <h3 className="text-2xl font-semibold text-indigo-700 mb-3 flex items-center">
                    <SemiconductorIcon className="w-7 h-7 mr-3 text-green-600"/>
                    1. What are Semiconductors?
                </h3>
                <p className="text-gray-700 leading-relaxed mb-2">
                  Definition: Materials that have electrical conductivity between that of a conductor (like copper) and an insulator (like glass). Their conductivity can be precisely controlled, making them ideal for electronic devices.
                </p>
                <p className="text-gray-700 mb-2">Common Semiconductor Materials: Silicon (Si) is the most prevalent, Germanium (Ge), Gallium Arsenide (GaAs).</p>
                <h4 className="text-xl font-medium text-gray-800 mb-2 mt-4">Intrinsic vs. Extrinsic Semiconductors:</h4>
                <ul className="list-disc list-inside text-gray-700 ml-4">
                  <li><span className="font-medium">Intrinsic:</span> Pure semiconductor material (e.g., pure silicon). Very few free charge carriers (electrons or holes), low conductivity.</li>
                  <li><span className="font-medium">Extrinsic:</span> Intentionally "doped" with impurities to increase conductivity.</li>
                </ul>
                <h4 className="text-xl font-medium text-gray-800 mb-2 mt-4">Types of Doping:</h4>
                <ul className="list-disc list-inside text-gray-700 ml-4">
                  <li><span className="font-medium">N-type Semiconductor:</span> Doped with <span className="font-medium">donor</span> impurities (e.g., Phosphorus, Arsenic). Adds extra electrons, making electrons the <span className="font-medium">majority carriers</span>.</li>
                  <li><span className="font-medium">P-type Semiconductor:</span> Doped with <span className="font-medium">acceptor</span> impurities (e.g., Boron, Aluminum). Creates "holes" (absence of an electron), making holes the <span className="font-medium">majority carriers</span>.</li>
                </ul>
              </section>

              {/* The P-N Junction */}
              <section className="mb-8">
                <h3 className="text-2xl font-semibold text-indigo-700 mb-3 flex items-center">
                    <DiodeIcon className="w-7 h-7 mr-3 text-indigo-500"/>
                    2. The P-N Junction: The Heart of the Diode
                </h3>
                <p className="text-gray-700 leading-relaxed mb-2">
                  Definition: A P-N junction is formed when a P-type semiconductor is brought into contact with an N-type semiconductor. This junction is the fundamental building block of most semiconductor devices.
                </p>
                <p className="text-gray-700 mb-2"><span className="font-medium">Depletion Region:</span> At the junction, free electrons from the N-side diffuse into the P-side, and holes from the P-side diffuse into the N-side. This creates a region near the junction that is depleted of free charge carriers, leaving behind immobile positive and negative ions. This region acts as an insulator and creates a <span className="font-medium">built-in potential barrier</span>.</p>
              </section>

              {/* Diodes */}
              <section className="mb-8">
                <h3 className="text-2xl font-semibold text-indigo-700 mb-3 flex items-center">
                    <DiodeIcon className="w-7 h-7 mr-3 text-indigo-500"/>
                    3. Diodes
                </h3>
                <p className="text-gray-700 leading-relaxed mb-2">
                  Definition: A two-terminal semiconductor device that essentially allows current to flow in only one direction. It's often called a "one-way valve" for electricity.
                </p>
                <p className="text-gray-700 mb-2"><span className="font-medium">Symbol:</span> A triangle with a line at its apex. The triangle points in the direction of conventional current flow.</p>
                <ul className="list-disc list-inside text-gray-700 ml-4">
                  <li><span className="font-medium">Anode (A):</span> The P-type material, positive terminal.</li>
                  <li><span className="font-medium">Cathode (K):</span> The N-type material, negative terminal (the line/bar side).</li>
                </ul>
                <h4 className="text-xl font-medium text-gray-800 mb-2 mt-4">Diode Biasing:</h4>
                <ul className="list-disc list-inside text-gray-700 ml-4">
                  <li><span className="font-medium">Forward Bias:</span> Positive voltage to anode relative to cathode. If voltage exceeds forward voltage drop (`VF`, typically 0.7V for silicon), current flows easily. Diode acts like a closed switch.</li>
                  <li><span className="font-medium">Reverse Bias:</span> Negative voltage to anode relative to cathode. Depletion region widens, creating very high resistance. Only tiny leakage current flows. Diode acts like an open switch.</li>
                  <li><span className="font-medium">Breakdown Voltage:</span> If reverse bias voltage is too high, the junction can break down, leading to large reverse current (can destroy diode).</li>
                </ul>
              </section>

              {/* Light Emitting Diodes (LEDs) */}
              <section className="mb-8">
                <h3 className="text-2xl font-semibold text-indigo-700 mb-3 flex items-center">
                    <LedIcon className="w-7 h-7 mr-3 text-yellow-400"/>
                    4. Light Emitting Diodes (LEDs)
                </h3>
                <p className="text-gray-700 leading-relaxed mb-2">
                  Definition: A special type of diode that emits light when forward biased.
                </p>
                <p className="text-gray-700 mb-2"><span className="font-medium">Mechanism:</span> When electrons and holes recombine at the P-N junction under forward bias, they release energy as photons (light).</p>
                <p className="text-gray-700 mb-2"><span className="font-medium">Color:</span> Depends on the semiconductor material, not the applied voltage (though intensity varies with current).</p>
                <h4 className="text-xl font-medium text-gray-800 mb-2 mt-4">Characteristics:</h4>
                <ul className="list-disc list-inside text-gray-700 ml-4">
                  <li><span className="font-medium">Forward Voltage Drop (`VF`):</span> Higher than regular diodes, typically 1.8V to 3.5V depending on color.</li>
                  <li>LEDs require a current-limiting resistor in series to prevent damage.</li>
                </ul>
              </section>

              {/* Transistors */}
              <section className="mb-8">
                <h3 className="text-2xl font-semibold text-indigo-700 mb-3 flex items-center">
                    <TransistorIcon className="w-7 h-7 mr-3 text-blue-500"/>
                    5. Transistors
                </h3>
                <p className="text-gray-700 leading-relaxed mb-2">
                  Definition: A semiconductor device used to amplify or switch electronic signals and electrical power. Often called a "controlled switch" or "current amplifier."
                </p>
                <h4 className="text-xl font-medium text-gray-800 mb-2 mt-4">Types of Transistors:</h4>
                <ul className="list-disc list-inside text-gray-700 ml-4">
                  <li><span className="font-medium">Bipolar Junction Transistors (BJTs):</span> Current-controlled devices. (Focus for this course).</li>
                  <li><span className="font-medium">Field-Effect Transistors (FETs - e.g., MOSFETs):</span> Voltage-controlled devices.</li>
                </ul>
                <h4 className="text-xl font-medium text-gray-800 mb-2 mt-4">Bipolar Junction Transistors (BJTs):</h4>
                <p className="text-gray-700 mb-2">Construction: Three layers of doped semiconductor material, forming two P-N junctions.</p>
                <p className="text-gray-700 mb-2">Terminals:</p>
                <ul className="list-disc list-inside text-gray-700 ml-4">
                  <li><span className="font-medium">Base (B):</span> The control input. A small current here controls a larger current.</li>
                  <li><span className="font-medium">Collector (C):</span> Where the main current enters (for NPN).</li>
                  <li><span className="font-medium">Emitter (E):</span> Where the main current leaves (for NPN).</li>
                </ul>
                <p className="text-gray-700 mb-2">Types: <span className="font-medium">NPN</span> (most common for switching) and <span className="font-medium">PNP</span>.</p>
                <h4 className="text-xl font-medium text-gray-800 mb-2 mt-4">BJT Operation Modes (Simplified for Switching):</h4>
                <ul className="list-disc list-inside text-gray-700 ml-4">
                  <li><span className="font-medium">Cutoff Region (OFF State):</span> No current into Base (`IB ≈ 0`). Transistor acts like an <span className="font-medium">open switch</span> between Collector and Emitter.</li>
                  <li><span className="font-medium">Saturation Region (ON State):</span> Sufficient current into Base (`IB` is high enough). Transistor acts like a <span className="font-medium">closed switch</span> between Collector and Emitter (very low voltage drop, typically 0.2V). Maximum current flows through Collector-Emitter.</li>
                  <li><span className="font-medium">Active Region:</span> (Amplification) Between cutoff and saturation.</li>
                </ul>
                <h4 className="text-xl font-medium text-gray-800 mb-2 mt-4">BJT as a Switch (NPN configuration):</h4>
                <ul className="list-disc list-inside text-gray-700 ml-4">
                  <li>Concept: Use a small current at the Base (e.g., from a microcontroller) to control a much larger current flow through a load.</li>
                  <li><span className="font-medium">Current Gain (β or hFE):</span> `IC = β × IB`. Indicates how much collector current you get for a given base current.</li>
                  <li><span className="font-medium">Base Resistor:</span> Always use a current-limiting resistor in series with the Base to protect the transistor and controlling source.</li>
                </ul>
              </section>

              {/* Relays */}
              <section className="mb-8">
                <h3 className="text-2xl font-semibold text-indigo-700 mb-3 flex items-center">
                    <Power className="w-7 h-7 mr-3 text-red-600"/>
                    6. Relays: Electromechanical Switches
                </h3>
                <p className="text-gray-700 leading-relaxed mb-2">
                  Definition: An electrically operated switch that uses an electromagnet to mechanically operate a switch.
                </p>
                <h4 className="text-xl font-medium text-gray-800 mb-2 mt-4">Why use Relays?</h4>
                <ul className="list-disc list-inside text-gray-700 ml-4">
                  <li>To control high-voltage or high-current circuits (e.g., AC mains, large motors) using a low-voltage, low-current control signal.</li>
                  <li>To provide electrical isolation between the control circuit and the load circuit.</li>
                  <li>To switch multiple circuits simultaneously.</li>
                </ul>
                <h4 className="text-xl font-medium text-gray-800 mb-2 mt-4">Construction:</h4>
                <ul className="list-disc list-inside text-gray-700 ml-4">
                  <li><span className="font-medium">Coil:</span> An electromagnet that, when energized, generates a magnetic field.</li>
                  <li><span className="font-medium">Armature:</span> A movable piece of ferromagnetic material attracted by the electromagnet.</li>
                  <li><span className="font-medium">Contacts:</span> The actual switch contacts (e.g., Normally Open (NO), Normally Closed (NC), Common (COM)).</li>
                </ul>
                <h4 className="text-xl font-medium text-gray-800 mb-2 mt-4">Operation:</h4>
                <p className="text-gray-700 leading-relaxed mb-2">
                  When current flows through the coil, it becomes magnetized and pulls the armature, which then opens or closes the electrical contacts, controlling the load circuit.
                </p>
                <h4 className="text-xl font-medium text-gray-800 mb-2 mt-4">Flyback Diode across Relay Coil:</h4>
                <ul className="list-disc list-inside text-gray-700 ml-4">
                  <li>It's critical to place a <span className="font-medium">flyback diode</span> (snubber or freewheeling diode) in parallel with the relay coil, in reverse bias.</li>
                  <li><span className="font-medium">Purpose:</span> When the current to the coil is suddenly turned off, the collapsing magnetic field generates a large reverse voltage spike (inductive kickback) that can damage the controlling transistor or microcontroller. The flyback diode provides a path for this inductive current to dissipate safely.</li>
                </ul>
              </section>
            </div>
          );
        };

        // LED Resistor Calculator Sandbox
        const LEDResistorSandbox = () => {
          const [batteryVoltage, setBatteryVoltage] = useState('');
          const [ledForwardVoltage, setLedForwardVoltage] = useState('');
          const [ledCurrent, setLedCurrent] = useState('');
          const [calculatedResistor, setCalculatedResistor] = useState('');
          const [calculatedPower, setCalculatedPower] = useState('');
          const [message, setMessage] = useState('');

          const calculateResistor = () => {
            setMessage('');
            const V_battery = parseFloat(batteryVoltage);
            const V_F = parseFloat(ledForwardVoltage);
            const I_LED = parseFloat(ledCurrent);

            if (isNaN(V_battery) || isNaN(V_F) || isNaN(I_LED) || I_LED <= 0) {
              setMessage("Please enter valid numerical values for Battery Voltage, LED Forward Voltage, and LED Current (must be > 0).");
              setCalculatedResistor('');
              setCalculatedPower('');
              return;
            }

            if (V_F >= V_battery) {
              setMessage("LED Forward Voltage must be less than Battery Voltage for current to flow.");
              setCalculatedResistor('');
              setCalculatedPower('');
              return;
            }

            const V_R = V_battery - V_F;
            const R = V_R / I_LED;
            const P_R = V_R * I_LED; // Power dissipated by the resistor

            setCalculatedResistor(R.toFixed(2));
            setCalculatedPower(P_R.toFixed(3)); // Display power with more precision
          };

          const resetFields = () => {
            setBatteryVoltage('');
            setLedForwardVoltage('');
            setLedCurrent('');
            setCalculatedResistor('');
            setCalculatedPower('');
            setMessage('');
          };

          return (
            <div className="p-6 bg-white rounded-lg shadow-lg">
              <h2 className="text-3xl font-bold text-gray-800 mb-6 border-b-2 pb-2">LED Current Limiting Resistor Calculator</h2>
              <p className="text-gray-700 mb-4">
                Calculate the required current-limiting resistor for an LED circuit.
              </p>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <div className="flex flex-col">
                  <label htmlFor="batteryVoltage" className="text-lg font-medium text-gray-700 mb-2">Battery Voltage (V)</label>
                  <input
                    type="number"
                    id="batteryVoltage"
                    value={batteryVoltage}
                    onChange={(e) => setBatteryVoltage(e.target.value)}
                    placeholder="e.g., 9"
                    className="p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"
                  />
                </div>
                <div className="flex flex-col">
                  <label htmlFor="ledForwardVoltage" className="text-lg font-medium text-gray-700 mb-2">LED Forward Voltage (VF, V)</label>
                  <input
                    type="number"
                    id="ledForwardVoltage"
                    value={ledForwardVoltage}
                    onChange={(e) => setLedForwardVoltage(e.target.value)}
                    placeholder="e.g., 2.0 (for Red LED)"
                    className="p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"
                  />
                </div>
                <div className="flex flex-col">
                  <label htmlFor="ledCurrent" className="text-lg font-medium text-gray-700 mb-2">Desired LED Current (I_LED, A)</label>
                  <input
                    type="number"
                    id="ledCurrent"
                    value={ledCurrent}
                    onChange={(e) => setLedCurrent(e.target.value)}
                    placeholder="e.g., 0.015 (for 15mA)"
                    className="p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"
                  />
                </div>
                <div className="flex flex-col">
                  <label htmlFor="calculatedResistor" className="text-lg font-medium text-gray-700 mb-2">Required Resistor (Ω)</label>
                  <input
                    type="text"
                    id="calculatedResistor"
                    value={calculatedResistor}
                    readOnly
                    placeholder="Calculated Resistance"
                    className="p-3 bg-gray-100 border border-gray-300 rounded-md"
                  />
                </div>
                <div className="flex flex-col">
                  <label htmlFor="calculatedPower" className="text-lg font-medium text-gray-700 mb-2">Resistor Power Dissipation (W)</label>
                  <input
                    type="text"
                    id="calculatedPower"
                    value={calculatedPower}
                    readOnly
                    placeholder="Calculated Power"
                    className="p-3 bg-gray-100 border border-gray-300 rounded-md"
                  />
                </div>
              </div>

              <div className="flex gap-4 mb-4">
                <button
                  onClick={calculateResistor}
                  className="flex-1 bg-indigo-600 text-white py-3 px-6 rounded-md hover:bg-indigo-700 transition duration-300 ease-in-out shadow-md"
                >
                  Calculate
                </button>
                <button
                  onClick={resetFields}
                  className="flex-1 bg-gray-300 text-gray-800 py-3 px-6 rounded-md hover:bg-gray-400 transition duration-300 ease-in-out shadow-md"
                >
                  Reset
                </button>
              </div>

              {message && (
                <div className="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded-md relative" role="alert">
                  <span className="block sm:inline">{message}</span>
                </div>
              )}

              <div className="mt-8 p-4 bg-gray-50 rounded-lg border border-gray-200">
                <h3 className="text-xl font-semibold text-gray-800 mb-3">Formula Used:</h3>
                <p className="formula-box mb-2">`R = (V_battery - V_F) / I_LED`</p>
                <p className="formula-box">`P_R = (V_battery - V_F) * I_LED`</p>
                <p className="text-sm text-gray-600 mt-3">
                  (Always choose a standard resistor value slightly higher than calculated, and a power rating higher than dissipated for safety.)
                </p>
              </div>
            </div>
          );
        };

        // Practice Problems Component
        const PracticeProblems = () => {
          const [activeTab, setActiveTab] = useState('homework'); // Only homework for now

          const homeworkQuestions = [
            {
              id: 1,
              type: 'text',
              question: 'Explain the difference between N-type and P-type semiconductors, including the type of doping impurity and majority charge carriers for each.',
              answer: 'N-type semiconductors are doped with donor impurities (Group V elements like Phosphorus), which add extra electrons, making electrons the majority carriers. P-type semiconductors are doped with acceptor impurities (Group III elements like Boron), which create "holes" (absence of an electron), making holes the majority carriers.'
            },
            {
              id: 2,
              type: 'text',
              question: 'Describe the behavior of a diode under forward bias and reverse bias. How does it act like a "one-way valve" for electricity?',
              answer: 'Under forward bias, a positive voltage is applied to the anode relative to the cathode. If this voltage exceeds the diode\'s forward voltage drop (e.g., 0.7V for silicon), the depletion region is overcome, and current flows easily, making the diode act like a closed switch. Under reverse bias, a negative voltage is applied to the anode relative to the cathode. The depletion region widens, creating very high resistance, and only a tiny leakage current flows, making the diode act like an open switch. This directional behavior is why it\'s called a "one-way valve."'
            },
            {
              id: 3,
              type: 'calculation',
              question: 'LED Resistor Calculation: A red LED has a typical forward voltage (`VF`) of 2.0V and you want to drive it with a current (`I_LED`) of 15mA (0.015A). If you are using a 9V battery, what is the required series current-limiting resistor (R)? What is the power dissipated by this resistor?',
              subQuestions: [
                { label: 'Required Resistor (Ω)', key: 'resistor', expected: '466.67' },
                { label: 'Resistor Power Dissipation (W)', key: 'power', expected: '0.105' }
              ],
              explanation: 'Voltage across resistor `VR = V_battery - VF = 9V - 2.0V = 7.0V`. Required Resistor `R = VR / I_LED = 7.0V / 0.015A ≈ 466.67Ω`. Power dissipated by resistor `PR = VR * I_LED = 7.0V * 0.015A = 0.105W`. A standard 470Ω resistor would be suitable, and a 1/4W (0.25W) resistor would be sufficient for power rating.'
            },
            {
              id: 4,
              type: 'text',
              question: 'Transistor as a Switch: Explain the difference between the "cutoff" and "saturation" regions for a Bipolar Junction Transistor (BJT) when used as a switch. How does a small base current control a larger collector current?',
              answer: 'In the "cutoff" region (OFF state), no current flows into the Base terminal, and the transistor acts like an open switch between the Collector and Emitter, meaning no current flows through the main path. In the "saturation" region (ON state), a sufficient current flows into the Base, causing the transistor to act like a closed switch between the Collector and Emitter, allowing maximum current to flow through the load. A small base current controls a larger collector current due to the transistor\'s current gain (β or hFE), where `IC = β × IB`.'
            },
            {
              id: 5,
              type: 'text',
              question: 'Relay and Flyback Diode: Why is a flyback diode essential when using a transistor to switch an inductive load like a relay coil? Describe its purpose and how it protects the switching component.',
              answer: 'A flyback diode (or freewheeling diode) is essential because when the current to an inductive load (like a relay coil) is suddenly interrupted, the collapsing magnetic field generates a large, high-voltage spike (inductive kickback). This voltage spike can exceed the breakdown voltage of the switching transistor or microcontroller, damaging it. The flyback diode is placed in parallel with the coil in reverse bias, providing a safe path for this inductive current to circulate and dissipate, thus protecting the switching component from the voltage spike.'
            }
          ];

          const [homeworkAnswers, setHomeworkAnswers] = useState({});

          const handleHomeworkChange = (id, key, value) => {
            setHomeworkAnswers(prev => ({
              ...prev,
              [id]: {
                ...(prev[id] || {}),
                [key]: value
              }
            }));
          };

          return (
            <div className="p-6 bg-white rounded-lg shadow-lg">
              <h2 className="text-3xl font-bold text-gray-800 mb-6 border-b-2 pb-2">Practice Problems</h2>

              <div className="flex mb-6 space-x-4">
                <button
                  onClick={() => setActiveTab('homework')}
                  className={`px-6 py-3 rounded-md font-semibold transition duration-300 ${
                    activeTab === 'homework' ? 'bg-indigo-600 text-white shadow-md' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                  }`}
                >
                  Homework Questions
                </button>
              </div>

              {activeTab === 'homework' && (
                <div>
                  <h3 className="text-2xl font-semibold text-indigo-700 mb-4 flex items-center">
                    <BookOpenText className="w-7 h-7 mr-3 text-blue-500"/>
                    Homework Questions
                  </h3>
                  <p className="text-gray-700 mb-4">
                    Instructions: Show all work and steps clearly. Include units in your final answers.
                  </p>
                  {homeworkQuestions.map((q) => (
                    <div key={q.id} className="mb-8 p-4 border border-gray-200 rounded-lg bg-gray-50">
                      <p className="text-lg font-medium text-gray-900 mb-3">{q.id}. {q.question}</p>
                      {q.type === 'text' ? (
                        <textarea
                          className="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 h-24"
                          placeholder="Type your answer here..."
                          value={homeworkAnswers[q.id]?.answer || ''}
                          onChange={(e) => handleHomeworkChange(q.id, 'answer', e.target.value)}
                        ></textarea>
                      ) : (
                        <div className="space-y-3">
                          {q.subQuestions.map(sq => (
                            <div key={sq.key} className="flex flex-col">
                              <label htmlFor={`hw-${q.id}-${sq.key}`} className="text-md text-gray-700 mb-1">{sq.label}</label>
                              <input
                                type="number"
                                id={`hw-${q.id}-${sq.key}`}
                                className="p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"
                                value={homeworkAnswers[q.id]?.[sq.key] || ''}
                                onChange={(e) => handleHomeworkChange(q.id, sq.key, e.target.value)}
                                placeholder={`Enter ${sq.label}`}
                              />
                            </div>
                          ))}
                        </div>
                      )}
                      <details className="mt-4 p-3 bg-indigo-50 rounded-md cursor-pointer">
                        <summary className="font-semibold text-indigo-800">Show Explanation/Answer</summary>
                        <div className="mt-2 text-indigo-700">
                          <p>{q.explanation}</p>
                        </div >
                      </details>
                    </div>
                  ))}
                </div>
              )}
            </div>
          );
        };


        // Main App Component
        const App = () => {
          const [activeSection, setActiveSection] = useState('review'); // 'review', 'sandbox', 'practice'

          return (
            <div className="min-h-screen bg-gray-100 font-inter text-gray-900 p-4 sm:p-6 md:p-8">
              <header className="text-center mb-8">
                <h1 className="text-4xl sm:text-5xl font-extrabold text-indigo-800 mb-2">
                  Mechatronics 1 Study Guide
                </h1>
                <p className="text-xl sm:text-2xl text-gray-600">Week 3: Semiconductors, Diodes & Transistors</p>
                <a href="index.html" className="mt-4 inline-flex items-center bg-gray-200 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-300 transition duration-300">
                    <Home className="w-5 h-5 mr-2" />
                    Back to Course Hub
                </a>
              </header>

              <nav className="flex justify-center gap-4 mb-8 flex-wrap">
                <button
                  onClick={() => setActiveSection('review')}
                  className={`nav-button ${activeSection === 'review' ? 'active' : ''}`}
                >
                  <BookOpenText className="w-6 h-6 sm:w-8 sm:h-8" />
                  <span className="text-sm sm:text-base">Concept Review</span>
                </button>
                <button
                  onClick={() => setActiveSection('sandbox')}
                  className={`nav-button ${activeSection === 'sandbox' ? 'active' : ''}`}
                >
                  <FlaskConical className="w-6 h-6 sm:w-8 sm:h-8" />
                  <span className="text-sm sm:text-base">Interactive Sandbox</span>
                </button>
                <button
                  onClick={() => setActiveSection('practice')}
                  className={`nav-button ${activeSection === 'practice' ? 'active' : ''}`}
                >
                  <Award className="w-6 h-6 sm:w-8 sm:h-8" />
                  <span className="text-sm sm:text-base">Practice Problems</span>
                </button>
              </nav>

              <main className="container">
                {activeSection === 'review' && <ConceptReview />}
                {activeSection === 'sandbox' && <LEDResistorSandbox />}
                {activeSection === 'practice' && <PracticeProblems />}
              </main>

              <footer className="text-center text-gray-500 text-sm mt-12">
                <p>&copy; {new Date().getFullYear()} Mechatronics 1 Study Guide. All rights reserved.</p>
              </footer>
            </div>
          );
        };

        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);
    </script>
</body>
</html>
